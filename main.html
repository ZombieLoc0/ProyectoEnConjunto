<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuraciones</title>
    <script src="https://unpkg.com/gojs/release/go.js"></script> <!-- Incluye la biblioteca GoJS -->
    <link rel="stylesheet" href="css/mainstyle.css">
</head>
<body onload="init()">
    <header class="header">
        <a href="main.html" class="logo">NET-TEC</a>

        <nav class="navbar">
            <a href="main.html">Inicio</a>
            <a href="info.html">¿Cómo funciona?</a>
            <a href="contacto.html">Contacto</a>
        </nav>
    </header>
    <div class="main-content">
        <div id="myDiagramDiv" class="map-container">
            <script>
                function init() {
                  var $ = go.GraphObject.make;
            
                  var myDiagram =
                    $(go.Diagram, "myDiagramDiv",
                      {
                                initialContentAlignment: go.Spot.Center,  //establece que el contenido del diagrama se alinee al centro del área del diagrama.
                                "undoManager.isEnabled": true //se habilita esta funcionalidad de deshacer y rehacer en el diagrama.
                      });
            
                          // Definir las plantillas para los nodos y enlaces
                          myDiagram.nodeTemplate =
                        $(go.Node, "Auto", // Utiliza la función $ de GoJS para crear un nuevo objeto de nodo (go.Node)
                            $(go.Panel, "Vertical",  // Usar un Panel Vertical para colocar la imagen y el texto uno debajo del otro
                                $(go.Picture,  // Usar Picture en lugar de Shape para mostrar imágenes
                                    {
                                        margin: 30,
                                        width: 50,
                                        height: 50,
                                        imageStretch: go.GraphObject.Uniform  // La imagen se debe estirar uniformemente para ajustarse al tamaño del nodo.
                                    },
                                    new go.Binding("source", "type", function(type) {
                                        // Mapear el tipo de nodo al archivo de imagen correspondiente
                                        switch (type) {
                                            case "Router": return "images/router.png";
                                            case "Switch": return "images/switch.png";
                                            case "Multicapa": return "images/multicapa.png";
                                            //case "PC": return "images/pc.png";
                                            //default: return "default.png";  // Imagen por defecto
                                        }
                                    })),
                                $(go.TextBlock, { margin: 8 }, new go.Binding("text"))  // , "key" También dentro del Panel Vertical, se define un objeto go.TextBlock que se utiliza para mostrar el texto (la clave del nodo).
                            )
                        );
            
            // Definir la plantilla personalizada para los enlaces
            myDiagram.linkTemplate =
                    $(go.Link,)
                    .add(
                      $(go.Shape,
                        { stroke: "#1e4ccb", strokeWidth: 1.5 })
                    )
                    .add(
                      $(go.Shape,
                        {
                          geometryString: "M0,0 10,0 10,6 0,6 z",
                          stroke: null,
                          fill: "red",
                          scale: 0.7,
                          toArrow: "Circle"
                        })
                    )
                    .add(
                      $(go.Shape,
                        {
                          geometryString: "M0,0 10,0 10,6 0,6 z",
                          stroke: null,
                          fill: "red",
                          scale: 0.7,
                          fromArrow: "Circle"
                        }),
                  $(go.TextBlock, // Etiqueta de texto en el lado "from"
                    { segmentOffset: new go.Point(-50, -10), textAlign: "center" },
                    new go.Binding("text", "t1")),
                  $(go.TextBlock, // Etiqueta de texto en el lado "to"
                    { segmentOffset: new go.Point(50, 10), textAlign: "center" },
                    new go.Binding("text", "t2"))
                );
            
            // Cargar datos del diagrama desde la API
            fetch('http://localhost:3000/data') // Cambia la URL según sea necesario
                    .then(response => response.json())
                    .then(data => {
                      myDiagram.model = new go.GraphLinksModel(data.nodes, data.links);
                    });
                }
            
              </script>
        </div>
    </div>
<div class="sidebar">
    <div class="tab">
        <button class="tablinks" onclick="openTab(event, 'deviceInfo')">Información del dispositivo</button>
        <button class="tablinks" onclick="openTab(event, 'configurationSection')">Secciones de configuración</button>
    </div>

    <div id="deviceInfo" class="tabcontent">
        <div class="device-info">
            <h2>Información del dispositivo</h2>
            <ul class="device-info-list">
                <li class="info">
                    <strong>Marca del Dispositivo:</strong> Cisco <br><br> 
                    <strong>Modelo:</strong> Catalyst 8200 series <br><br>
                    <strong>Dirección IP:</strong> 192.168.10.1 <br><br>
                    <strong>Puerto de Conmutación Físico:</strong> Serial 0/0/1 <br><br>
                    <strong>Uso de CPU:</strong> 10%<br><br>
                    <strong>Porcentaje de Memoria Disponible:</strong> 80%<br><br>
                    <strong>Porcentaje de Almacenamiento:</strong> 50%<br><br>
                </li>
            </ul>
        </div>
    </div>

    <div id="configurationSection" class="tabcontent">
        <div class="configuration-section">
            <h2>Secciones de configuración</h2>
            <div class="configurations-dropdown">
                <select class="dropdown" onchange="selectConfiguration(this.value)">
                    <option value="basics">Básicas</option>
                    <option value="security">Seguridad</option>
                    <option value="routing">DHCP</option>
                    <option value="shows">Shows</option>
                </select>
            </div>
            <div id="routingConfig" style="display: none;">
                <form id="dhcpForm">
                    <label for="dhcpRange">Rango DHCP:</label>
                    <input type="text" id="dhcpRange" name="dhcpRange"><br><br>
            
                    <label for="subnetMask">Máscara de subred:</label>
                    <input type="text" id="subnetMask" name="subnetMask"><br><br>
            
                    <label for="gateway">Puerta de enlace predeterminada:</label>
                    <input type="text" id="gateway" name="gateway"><br><br>
            
                    <label for="poolName">Nombre del pool DHCP:</label>
                    <input type="text" id="poolName" name="poolName"><br><br>
            
                    <label for="excludedIP">IP Excluida:</label> <!-- Nuevo campo para la IP excluida -->
                    <input type="text" id="excludedIP" name="excludedIP"><br><br> <!-- Nuevo campo para la IP excluida -->
            
                    <button type="button" onclick="applyDHCPConfiguration()">Aplicar configuración DHCP</button>
                </form>
            </div>
            <div id="showConfig" style="display: none;">
                <button type="button" class="src" onclick="showRunningConfig()">Show running-config</button><br><br>
                <button type="button" class="sib" onclick="showInterfaceBrief()">Show interface brief</button><br><br>
                <button type="button" class="svb" onclick="showVlanBrief()">Show vlan brief</button><br><br>
                <button type="button" class="sdb" onclick="showDhcpBinding()">Show DHCP binding</button>
            </div>
        </div>
    </div>    

    <script src="scripts/javas.js"></script>
</body>
</html>
