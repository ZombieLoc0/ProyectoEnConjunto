<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuraciones</title>
    <script src="https://unpkg.com/gojs/release/go.js"></script> <!-- Incluye la biblioteca GoJS -->
    <link rel="stylesheet" href="css/mainstyle.css">
</head>
<body>
    <header class="header">
        <a href="#" class="logo">NET-TEC</a>

        <nav class="navbar">
            <a href="#">Inicio</a>
            <a href="#">¿Cómo funciona?</a>
            <a href="#">Contacto</a>
        </nav>
    </header>
    <div class="main-content">
        <div id="diagramDiv" class="map-container">
            <script>
                // Crear un nuevo diagrama GoJS. variable $ que es una función de GoJS para crear objetos gráficos.
                var $ = go.GraphObject.make;
            
                var diagram = $(go.Diagram, "diagramDiv", {
                    initialContentAlignment: go.Spot.Center,  //establece que el contenido del diagrama se alinee al centro del área del diagrama.
                    "undoManager.isEnabled": true //se habilita esta funcionalidad de deshacer y rehacer en el diagrama.
                });
            
        // Definir las plantillas para los nodos y enlaces
        diagram.nodeTemplate =
            $(go.Node, "Auto", // Utiliza la función $ de GoJS para crear un nuevo objeto de nodo (go.Node)
                $(go.Panel, "Vertical",  // Usar un Panel Vertical para colocar la imagen y el texto uno debajo del otro
                    $(go.Picture,  // Usar Picture en lugar de Shape para mostrar imágenes
                        {
                            margin: 0,
                            width: 50,
                            height: 50,
                            imageStretch: go.GraphObject.Uniform  // La imagen se debe estirar uniformemente para ajustarse al tamaño del nodo.
                        },
                        new go.Binding("source", "type", function(type) {
                            // Mapear el tipo de nodo al archivo de imagen correspondiente
                            switch (type) {
                                case "Router": return "images/router.png";
                                case "Switch": return "images/switch.png";
                                case "PC": return "images/pc.png";
                                default: return "default.png";  // Imagen por defecto
                            }
                        })),
                    $(go.TextBlock, { margin: 8 }, new go.Binding("text", "key"))  // También dentro del Panel Vertical, se define un objeto go.TextBlock que se utiliza para mostrar el texto (la clave del nodo).
                )
            );
        
            
                diagram.linkTemplate =
                    $(go.Link,
                        $(go.Shape),
                        $(go.Shape, { toArrow: "Standard" })
                    );
            
                // Recibir el JSON para crear la topología de red
                function loadNetworkTopology(jsonData) {
                    var nodos = jsonData.nodes;
                    var link = jsonData.links;
            
                    diagram.model = new go.GraphLinksModel(nodos, link);
                }
        
                // Cargar la topología de red desde la API
                fetch('http://localhost:3000/data')
                    .then(response => response.json())
                    .then(data => {
                        loadNetworkTopology(data);
                    })
                    .catch(error => {
                        console.error('Error fetching the JSON data from API:', error);
                    });
        
            
               /*  //Cargar la topología de red desde un archivo JSON
                fetch('data.json')
                    .then(response => response.json())
                    .then(data => {
                        loadNetworkTopology(data);
                    })
                    .catch(error => {
                        console.error('Error fetching the JSON data:', error);
                    });*/
            </script>
        </div>
    </div>
    <div class="sidebar">
        <div class="device-info">
            <h2>Información del dispositivo</h2>
            <ul class="device-info-list">
                <li><strong>Dirección IP:</strong> </li>
            </ul>
        </div>
        <div class="configuration-section">
            <h2>Secciones de configuración</h2>
            <div class="configurations-dropdown">
                <select class="dropdown">
                    <option value="config1">Configuración 1</option>
                    <option value="config2">Configuración 2</option>
                    <option value="config2">Configuración 3</option>
                    <option value="config2">Configuración 4</option>
                    <option value="config2">Configuración 5</option>
                    <option value="config2">Configuración 6</option>
                    <option value="config2">Configuración 7</option>
                    <option value="config2">Configuración 8</option>
                    <option value="config2">Configuración 9</option>
                    <option value="config2">Configuración 10</option>
                    <option value="config2">Configuración 11</option>
                    <option value="config2">Configuración 12</option>
                    <option value="config2">Configuración 13</option>
                    <option value="config2">Configuración 14</option>
                    <option value="config2">Configuración 15</option>
                    <option value="config2">Configuración 16</option>
                    <option value="config2">Configuración 17</option>
                    <option value="config2">Configuración 18</option>
                    <option value="config2">Configuración 19</option>
                    <option value="config2">Configuración 20</option>

                </select>
            </div>
        </div>
    </div>    

    <script src="scripts/javas.js"></script>
</body>
</html>
