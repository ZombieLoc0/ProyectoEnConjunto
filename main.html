<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuraciones</title>
    <script src="https://unpkg.com/gojs/release/go.js"></script> <!-- Incluye la biblioteca GoJS -->
    <link rel="stylesheet" href="css/mainstyle.css">
</head>
<body>
    <header class="header">
        <a href="main.html" class="logo">NET-TEC</a>

        <nav class="navbar">
            <a href="main.html">Inicio</a>
            <a href="info.html">¿Cómo funciona?</a>
            <a href="contacto.html">Contacto</a>
        </nav>
    </header>
    <div class="main-content">
        <div id="diagramDiv" class="map-container">
            <script>
                // Crear un nuevo diagrama GoJS. variable $ que es una función de GoJS para crear objetos gráficos.
                var $ = go.GraphObject.make;
            
                var diagram = $(go.Diagram, "diagramDiv", {
                    initialContentAlignment: go.Spot.Center,  //establece que el contenido del diagrama se alinee al centro del área del diagrama.
                    "undoManager.isEnabled": true //se habilita esta funcionalidad de deshacer y rehacer en el diagrama.
                });
            
        // Definir las plantillas para los nodos y enlaces
        diagram.nodeTemplate =
            $(go.Node, "Auto", // Utiliza la función $ de GoJS para crear un nuevo objeto de nodo (go.Node)
                $(go.Panel, "Vertical",  // Usar un Panel Vertical para colocar la imagen y el texto uno debajo del otro
                    $(go.Picture,  // Usar Picture en lugar de Shape para mostrar imágenes
                        {
                            margin: 0,
                            width: 50,
                            height: 50,
                            imageStretch: go.GraphObject.Uniform  // La imagen se debe estirar uniformemente para ajustarse al tamaño del nodo.
                        },
                        new go.Binding("source", "type", function(type) {
                            // Mapear el tipo de nodo al archivo de imagen correspondiente
                            switch (type) {
                                case "Router": return "images/router.png";
                                case "Switch": return "images/switch.png";
                                //case "PC": return "images/pc.png";
                                //default: return "default.png";  // Imagen por defecto
                            }
                        })),
                    $(go.TextBlock, { margin: 8 }, new go.Binding("text", "key"))  // También dentro del Panel Vertical, se define un objeto go.TextBlock que se utiliza para mostrar el texto (la clave del nodo).
                )
            );
        
            
                diagram.linkTemplate =
                    $(go.Link,
                        $(go.Shape),
                        $(go.Shape, { toArrow: "Standard" })
                    );
            
                // Recibir el JSON para crear la topología de red
                function loadNetworkTopology(jsonData) {
                    var nodos = jsonData.nodes;
                    var link = jsonData.links;
            
                    diagram.model = new go.GraphLinksModel(nodos, link);
                }
        
                // Cargar la topología de red desde la API
                fetch('http://localhost:3000/data')
                    .then(response => response.json())
                    .then(data => {
                        loadNetworkTopology(data);
                    })
                    .catch(error => {
                        console.error('Error fetching the JSON data from API:', error);
                    });
            
               /*  //Cargar la topología de red desde un archivo JSON
                fetch('data.json')
                    .then(response => response.json())
                    .then(data => {
                        loadNetworkTopology(data);
                    })
                    .catch(error => {
                        console.error('Error fetching the JSON data:', error);
                    });*/
            </script>
        </div>
    </div>
<div class="sidebar">
    <div class="tab">
        <button class="tablinks" onclick="openTab(event, 'deviceInfo')">Información del dispositivo</button>
        <button class="tablinks" onclick="openTab(event, 'configurationSection')">Secciones de configuración</button>
    </div>

    <div id="deviceInfo" class="tabcontent">
        <div class="device-info">
            <h2>Información del dispositivo</h2>
            <ul class="device-info-list">
                <li class="info">
                    <strong>Marca del Dispositivo:</strong> Cisco <br><br> 
                    <strong>Modelo:</strong> Catalyst 8200 series <br><br>
                    <strong>Dirección IP:</strong> 192.168.10.1 <br><br>
                    <strong>Puerto de Conmutación Físico:</strong> Serial 0/0/1 <br><br>
                    <strong>Uso de CPU:</strong> 10%<br><br>
                    <strong>Porcentaje de Memoria Disponible:</strong> 80%<br><br>
                    <strong>Interfaces conecatadas: </strong> Gi0/1: 192.168.10.3<br><br>
                 </li>
            </ul>
        </div>
    </div>

    <div id="configurationSection" class="tabcontent">
        <div class="configuration-section">
            <h2>Secciones de configuración</h2>
            <div class="configurations-dropdown">
                <select class="dropdown" onchange="selectConfiguration(this.value)">
                    <option value="basics">Básicas</option>
                    <option value="security">Seguridad</option>
                    <option value="routing">DHCP</option>
                </select>
            </div>
            <div id="basicConfig">
                <form id="bsConfig">
                    <label for="hostname"> Hostname:</label>
                    <input type="text" id="hostname" name="hostname"><br><br>
                    <label for="MOTD"> Mensaje del Día:</label>
                    <input type="text" id="MOTD" name="MOTD"><br><br>
                    <button type="button" onclick="applyHostname()">Aplicar configuración de Hostname</button>
                </form>
            
            </div>
            <div id="routingConfig" style="display: none;">
                <form id="dhcpForm">
                    <label for="dhcpRange">Rango DHCP:</label>
                    <input type="text" id="dhcpRange" name="dhcpRange"><br><br>
            
                    <label for="subnetMask">Máscara de subred:</label>
                    <input type="text" id="subnetMask" name="subnetMask"><br><br>
            
                    <label for="gateway">Puerta de enlace predeterminada:</label>
                    <input type="text" id="gateway" name="gateway"><br><br>
            
                    <label for="poolName">Nombre del pool DHCP:</label>
                    <input type="text" id="poolName" name="poolName"><br><br>
            
                    <label for="excludedIP">IP Excluida:</label>
                    <input type="text" id="excludedIP" name="excludedIP"><br><br>
            
                    <button type="button" onclick="applyDHCPConfiguration()">Aplicar configuración DHCP</button>
                </form>
            </div>
        </div>
    </div>    

    <script src="scripts/javas.js"></script>
</body>
</html>
